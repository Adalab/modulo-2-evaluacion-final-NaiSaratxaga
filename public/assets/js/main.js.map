{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n// Select from HTML\nconst searchInput = document.querySelector('.js_searchInput');\nconst searchButton = document.querySelector('.js_searchButton');\nconst resetButton = document.querySelector('.js_resetButton');\n\nconst cocktailsSearchResultList = document.querySelector(\n  '.js_cocktailsSearchResultList'\n);\nconst cocktailsFavList = document.querySelector('.js_cocktailsFavList');\n\nconst imageFallback =\n  'https://via.placeholder.com/150/ffffff/666666/?text=no-image';\n\nlet cocktails = [];\nlet favCocktails = [];\n\n// Functions\nfunction getCocktails() {\n  const cocktailTitleToSearch = searchInput.value;\n  fetch(\n    `https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${cocktailTitleToSearch}`\n  )\n    .then((response) => response.json())\n    .then((data) => {\n      cocktails = data.drinks;\n      renderCocktails(cocktails);\n    });\n}\n\nfunction cleanCocktailsResults() {\n  cocktailsSearchResultList.innerHTML = '';\n}\n\nfunction renderCocktails(cocktails) {\n  cleanCocktailsResults();\n  if (!cocktails) {\n    const cocktailTitleToSearch = searchInput.value;\n    cocktailsSearchResultList.innerHTML = `<li class=\"no-cocktails\">There are no cocktails for the search: ${cocktailTitleToSearch}</li>`;\n    return;\n  }\n\n  for (const cocktail of cocktails) {\n    const imageSrc = cocktail.strDrinkThumb || imageFallback;\n    const favClass = isAlreadyInFavs(cocktail.idDrink) ? 'fav-cocktail' : '';\n\n    cocktailsSearchResultList.innerHTML += `\n    <li class=\" ${favClass}\" onClick=\"addToFav(this)\" id=${cocktail.idDrink}>\n        <h2 class=\"drink-name\">\n          ${cocktail.strDrink}\n        </h2>\n        <img src=${imageSrc} class=\"img\" alt=\"cocktail\">\n    </li>`;\n  }\n}\n\n// Favourites\nfunction isAlreadyInFavs(cocktailId) {\n  return favCocktails.find((cocktail) => cocktail.idDrink === cocktailId);\n}\n\nfunction unmarkAsFavoruite(cocktailId) {\n  const cocktailElement = document.getElementById(cocktailId);\n  if (cocktailElement) {\n    cocktailElement.classList.remove('fav-cocktail');\n  }\n}\n\nfunction addToFav(cocktailElementToAdd) {\n  const selectedCocktailId = cocktailElementToAdd.id;\n\n  if (isAlreadyInFavs(selectedCocktailId)) {\n    return;\n  }\n\n  cocktailElementToAdd.classList.add('fav-cocktail');\n  const selectedCocktail = cocktails.find(\n    (cocktail) => cocktail.idDrink === selectedCocktailId\n  );\n  favCocktails.push(selectedCocktail);\n\n  renderFavouriteCocktails(favCocktails);\n  saveFavsToLocalStorage();\n}\n\nfunction removeFromFav(cocktailIdToRemoveFromFav) {\n  //const cocktailIdToRemoveFromFav = cocktailFavElementToRemove.id;\n\n  favCocktails = favCocktails.filter(\n    (cocktail) => cocktail.idDrink !== cocktailIdToRemoveFromFav\n  );\n\n  renderFavouriteCocktails(favCocktails);\n  unmarkAsFavoruite(cocktailIdToRemoveFromFav);\n  saveFavsToLocalStorage();\n}\n\nfunction loadFavsFromLocalStorage() {\n  favCocktails = JSON.parse(localStorage.getItem('favouriteCocktails')) || [];\n  renderFavouriteCocktails(favCocktails);\n}\n\nfunction saveFavsToLocalStorage() {\n  localStorage.setItem('favouriteCocktails', JSON.stringify(favCocktails));\n}\n\nfunction renderFavouriteCocktails(favouriteCocktails) {\n  cocktailsFavList.innerHTML = '';\n  if (!favouriteCocktails.length) {\n    cocktailsFavList.innerHTML = `<li class=\"no-fav\">There are no fav cocktails </li>`;\n  }\n\n  for (const favouriteCocktail of favouriteCocktails) {\n    const imageSrc = favouriteCocktail.strDrinkThumb\n      ? favouriteCocktail.strDrinkThumb\n      : imageFallback;\n\n    cocktailsFavList.innerHTML += `\n      <li class=\"cocktail\" id=${favouriteCocktail.idDrink}>\n        <h2 class=\"drink-name\">\n          ${favouriteCocktail.strDrink}\n        </h2>\n        <h3 class=\"main--remove-fav\" onClick=\"removeFromFav('${favouriteCocktail.idDrink}')\"> ðŸ’” Eliminar</h3>\n        <img src=${imageSrc} class=\"img\" alt=\"cocktail\">\n      </li>`;\n  }\n}\n\n// Reset\nfunction handleClickReset() {\n  cocktails = [];\n  cleanCocktailsResults();\n  searchInput.value = '';\n\n  setSearchButtonState();\n}\n\n// Search\n// Reevaluates if the search button is disabled or not\n// based on if there is text to search by\nfunction setSearchButtonState() {\n  searchInput.value.length >= 3\n    ? (searchButton.disabled = false)\n    : (searchButton.disabled = true);\n}\n\nfunction searchCocktails(event) {\n  event.preventDefault();\n  getCocktails();\n}\n\nfunction init() {\n  // Subscriptions\n  searchInput.addEventListener('keyup', setSearchButtonState);\n  searchButton.addEventListener('click', searchCocktails);\n  resetButton.addEventListener('click', handleClickReset);\n\n  // Sets the disable or enable state for the search button\n  setSearchButtonState();\n\n  // Loads the already saved favourites\n  loadFavsFromLocalStorage();\n}\n\n// setup the page\ninit();\n"]}