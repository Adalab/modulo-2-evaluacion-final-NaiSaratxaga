{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n// Select from HTML\nconst cocktailsList = document.querySelector('.js_listResults');\nconst searchInput = document.querySelector('.js_input');\nconst searchButton = document.querySelector('.js_buttonSearch');\nconst resetButton = document.querySelector('.js_buttonReset');\nconst cocktailsFavList = document.querySelector('.js_listFav');\n\nconst imageFallback =\n  'https://via.placeholder.com/150/ffffff/666666/?text=no-image';\n\nlet cocktails = [];\nlet favCocktails = [];\n\n// Functions\nfunction getCocktails() {\n  const cocktailTitleToSearch = searchInput.value;\n  fetch(\n    `https://www.thecocktaildb.com/api/json/v1/1/search.php?s=${cocktailTitleToSearch}`\n  )\n    .then((response) => response.json())\n    .then((data) => {\n      cocktails = data.drinks;\n      renderCocktails(cocktails);\n    });\n}\n// Favourites\nfunction isAlreadyInFavs(cocktailId) {\n  return favCocktails.find((cocktail) => cocktail.idDrink === cocktailId);\n}\n\nfunction cocktailSelected(cocktailElementListItem) {\n  const selectedCocktailId = cocktailElementListItem.id;\n\n  if (isAlreadyInFavs(selectedCocktailId)) {\n    return;\n  }\n\n  cocktailElementListItem.classList.add('fav-cocktail');\n  const selectedCocktail = cocktails.find(\n    (cocktail) => cocktail.idDrink === selectedCocktailId\n  );\n  favCocktails.push(selectedCocktail);\n\n  renderFavouriteCocktails(favCocktails);\n}\n\nfunction cleanCocktailsResults() {\n  cocktailsList.innerHTML = '';\n}\n\nfunction renderCocktails(cocktails) {\n  cleanCocktailsResults();\n  if (!cocktails) {\n    const cocktailTitleToSearch = searchInput.value;\n    cocktailsList.innerHTML = `<li class=\"no-cocktails\">There are no cocktails for the search: ${cocktailTitleToSearch}</li>`;\n    return;\n  }\n\n  for (const cocktail of cocktails) {\n    const imageSrc = cocktail.strDrinkThumb || imageFallback;\n    const favClass = isAlreadyInFavs(cocktail.idDrink) ? 'fav-cocktail' : '';\n\n    cocktailsList.innerHTML += `\n      <li class=\"cocktail ${favClass}\" onClick=\"cocktailSelected(this)\" id=${cocktail.idDrink}>\n        <h2 class=\"drink-name text\">\n          ${cocktail.strDrink}\n        </h2>\n        <img src=${imageSrc} class=\"img\" alt=\"cocktail\">\n      </li>`;\n  }\n}\n\nfunction unmarkAsFavoruite(cocktailId) {\n  const cocktailElement = document.getElementById(cocktailId);\n  cocktailElement.classList.remove('fav-cocktail');\n}\n\nfunction removeFromFav(cocktailFavElementToRemove) {\n  const cocktailIdToRemoveFromFav = cocktailFavElementToRemove.id;\n\n  favCocktails = favCocktails.filter(\n    (cocktail) => cocktail.idDrink !== cocktailIdToRemoveFromFav\n  );\n\n  renderFavouriteCocktails(favCocktails);\n  unmarkAsFavoruite(cocktailIdToRemoveFromFav);\n}\n\nfunction renderFavouriteCocktails(favouriteCocktails) {\n  cocktailsFavList.innerHTML = '';\n  if (!favouriteCocktails) {\n    cocktailsFavList.innerHTML = `<li class=\"no-favs\">There are no fav cocktails </li>`;\n  }\n\n  for (const favouriteCocktail of favouriteCocktails) {\n    const imageSrc = favouriteCocktail.strDrinkThumb\n      ? favouriteCocktail.strDrinkThumb\n      : imageFallback;\n\n    cocktailsFavList.innerHTML += `\n      <li class=\"cocktail\" onClick=\"removeFromFav(this)\" id=${favouriteCocktail.idDrink}>\n        <h2 class=\"drink-name text\">\n          ${favouriteCocktail.strDrink}\n        </h2>\n        <img src=${imageSrc} class=\"img\" alt=\"cocktail\">\n      </li>`;\n  }\n}\n\nfunction handleClickReset() {\n  cocktails: [];\n  cleanCocktailsResults('');\n  searchInput.value = '';\n  setSearchButtonState();\n}\n\n// Callback functions\n// Reevaluates if the search button is disabled or not\n// based on if there is text to search by\nfunction setSearchButtonState() {\n  searchInput.value.length >= 3\n    ? (searchButton.disabled = false)\n    : (searchButton.disabled = true);\n}\n\nfunction searchCocktails(event) {\n  event.preventDefault();\n  getCocktails();\n}\n\nfunction init() {\n  // Subscriptions\n  searchInput.addEventListener('keyup', setSearchButtonState);\n  searchButton.addEventListener('click', searchCocktails);\n  resetButton.addEventListener('click', handleClickReset);\n  // Sets the disable or enable state for the search button\n  setSearchButtonState();\n}\n\n// setup the page\ninit();\n"]}